<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz Test</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@5/dark.css">
  <style>
  .result-question {
  background-color: #fff;
  border-left: 5px solid #5bc0de;
  margin-top: 15px;
  padding: 15px;
  border-radius: 6px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.final-score-box {
  background-color: #e0f7fa;
  border: 2px solid #00acc1;
  border-radius: 10px;
  padding: 20px;
  margin: 20px auto;
  text-align: center;
  font-size: 18px;
  font-weight: bold;
  color: #004d40;
  max-width: 600px;
}

.result-buttons button {
  padding: 10px 20px;
  background-color: #5bc0de;
  color: white;
  border: none;
  border-radius: 6px;
  margin: 5px;
  cursor: pointer;
  font-size: 16px;
}

.result-buttons button:hover {
  background-color: #31b0d5;
}
  
    /* (Same CSS as your original ‚Äî omitted here for brevity; you can paste your CSS here) */
    
    /* Copy your original CSS here exactly as you gave it */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background-color: #f4f4f4;
      padding-bottom: 80px; /* Leave space for fixed button bar */
    }

    header {
      background-color: #e7e7e7;
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header h1 {
      font-size: 16px;
      margin: 0;
    }

    .top-bar {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .menu-icon {
      display: none;
      font-size: 20px;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .menu-icon {
        display: block;
        order: 2;
      }

      .top-bar span {
        order: 1;
      }

      .top-bar button {
        order: 3;
      }
    }

    .quiz-container {
      display: flex;
      padding: 20px;
      flex-direction: row;
    }

    .question-section {
      flex: 3;
      background: #fff;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      margin-right: 20px;
    }

    .question-number {
      font-weight: bold;
      margin-bottom: 10px;
    }

    .options label {
      display: block;
      margin: 10px 0;
    }

    .sidebar {
      flex: 1;
      background: #e7f0fa;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .sidebar h3 {
      margin-bottom: 10px;
      font-size: 14px;
    }

    .sidebar .question-buttons {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
      margin-bottom: 20px;
    }

    .sidebar .question-buttons button {
      padding: 8px;
      border: 2px solid #000;
      background-color: #fff;
      border-radius: 0;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .sidebar .question-buttons button.active {
      border-color: #000;
      border-radius: 20px;
    }

    .sidebar .question-buttons button.answered {
      background-color: #4CAF50;
      color: white;
    }

    .sidebar .question-buttons button.unanswered {
      background-color: #f44336;
      color: white;
    }

    .sidebar .question-buttons button.review {
      background-color: #6a1b9a;
      color: white;
    }

    .question-box {
      display: none;
    }

    .question-box.active {
      display: block;
    }

    #result {
      
      background: #fff;
      padding: 20px;
      margin-top: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .bottom-action-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #f1f1f1;
      padding: 10px 20px;
      display: flex;
      justify-content: center;
      z-index: 1000;
      border-top: 1px solid #ccc;
    }

    .bottom-action-bar .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      width: 100%;
    }

    .bottom-action-bar .buttons button {
      padding: 12px 20px;
      height: 45px;
      border: none;
      background-color: #5bc0de;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      flex: 1 1 auto;
      min-width: 120px;
      text-align: center;
      box-sizing: border-box;
    }

    .bottom-action-bar .buttons button:hover {
      background-color: #31b0d5;
    }

    @media (max-width: 768px) {
      .quiz-container {
        flex-direction: column;
      }

      .sidebar {
        display: none;
      }

      .sidebar.open {
        display: block;
        order: -1;
        margin-bottom: 20px;
      }

      .question-section {
        margin-right: 0;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1 id="quiz-title">Delhi Police MTS: (Mixed) Mini Live Test</h1>
    <div class="top-bar">
      <span id="timer"><strong>Time Left:</strong> 00:00</span>
      <button id="fullscreen-toggle">Switch Full Screen</button>
      <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
      <select id="language-switch" onchange="switchLanguage()" style="padding: 5px;">
        <option value="en">English</option>
        <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
      </select>
    </div>
  </header>

  <div class="bottom-action-bar">
    <div class="buttons">
      <button onclick="previousQuestion()">Previous</button>
      <button onclick="markForReview()">Mark for Review & Next</button>
      <button onclick="clearResponse()">Clear Response</button>
      <button onclick="saveAndNext()">Save & Next</button>
      <button onclick="submitTest()">Submit Test</button>
    </div>
  </div>

  <div class="quiz-container">
    <div class="question-section" id="question-section">
      <!-- Question content will be injected here -->
    </div>

    <div class="sidebar">
      <div>
        <h3 id="section-title">SECTION: General Intelligence and Reasoning</h3>
        <div class="question-buttons" id="question-buttons"></div>
        <div class="buttons">
          <button>Question Paper</button>
          <button>Instructions</button>
        </div>
      </div>
    </div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  // --- Quiz Data: Edit only this object to change questions, options, answers, explanations, and language texts ---
  const quizData = {
    title: {
    en: "Current Affairs Morning Quiz: 5 June 2025",
    hi: "‡§ï‡§∞‡§Ç‡§ü ‡§Ö‡§´‡•á‡§Ø‡§∞‡•ç‡§∏ ‡§Æ‡•â‡§∞‡•ç‡§®‡§ø‡§Ç‡§ó ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º: 5 ‡§ú‡•Ç‡§® 2025"
  },
  sectionTitle: {
    en: "SECTION: General Awareness",
    hi: "‡§∏‡•á‡§ï‡•ç‡§∂‡§®: ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ"
  },
  timeLimitSeconds: 5 * 60, // 5 minutes

  questions: [
    {
      question: {
        en: "A rare migratory bird called the Caspian Gull (Larus cachinnans) was recently sighted in which state?",
        hi: "‡§¶‡•Å‡§∞‡•ç‡§≤‡§≠ ‡§™‡•ç‡§∞‡§µ‡§æ‡§∏‡•Ä ‡§™‡§ï‡•ç‡§∑‡•Ä '‡§ï‡•à‡§∏‡•ç‡§™‡§ø‡§Ø‡§® ‡§ó‡§≤' (Larus cachinnans) ‡§π‡§æ‡§≤ ‡§π‡•Ä ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§ñ‡§æ ‡§ó‡§Ø‡§æ?"
      },
      options: [
        { en: "Kerala", hi: "‡§ï‡•á‡§∞‡§≤" },
        { en: "Tamil Nadu", hi: "‡§§‡§Æ‡§ø‡§≤‡§®‡§æ‡§°‡•Å" },
        { en: "Maharashtra", hi: "‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞" },
        { en: "Karnataka", hi: "‡§ï‡§∞‡•ç‡§®‡§æ‡§ü‡§ï" }
      ],
      correctAnswer: "Kerala",
      explanation: {
        en: "The Caspian Gull was spotted for the first time in Kerala by an ornithologist. It usually nests in Central Asia near water bodies.",
        hi: "‡§ï‡•à‡§∏‡•ç‡§™‡§ø‡§Ø‡§® ‡§ó‡§≤ ‡§ï‡•ã ‡§ï‡•á‡§∞‡§≤ ‡§Æ‡•á‡§Ç ‡§™‡§π‡§≤‡•Ä ‡§¨‡§æ‡§∞ ‡§¶‡•á‡§ñ‡§æ ‡§ó‡§Ø‡§æ‡•§ ‡§Ø‡§π ‡§Ü‡§Æ‡§§‡•å‡§∞ ‡§™‡§∞ ‡§Æ‡§ß‡•ç‡§Ø ‡§è‡§∂‡§ø‡§Ø‡§æ ‡§ï‡•á ‡§ú‡§≤ ‡§®‡§ø‡§ï‡§æ‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§ò‡•ã‡§Ç‡§∏‡§≤‡§æ ‡§¨‡§®‡§æ‡§§‡§æ ‡§π‡•à‡•§"
      }
    },
    {
      question: {
        en: "Which ministry launched the Bharat Gen Multimodal Large Language Model (LLM) at the BharatGen Summit?",
        hi: "‡§≠‡§æ‡§∞‡§§‡§ú‡•á‡§® ‡§∂‡§ø‡§ñ‡§∞ ‡§∏‡§Æ‡•ç‡§Æ‡•á‡§≤‡§® ‡§Æ‡•á‡§Ç ‡§≠‡§æ‡§∞‡§§ ‡§ú‡•á‡§® ‡§Æ‡§≤‡•ç‡§ü‡•Ä‡§Æ‡•â‡§°‡§≤ ‡§¨‡§°‡§º‡•á ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•â‡§°‡§≤ (LLM) ‡§ï‡§ø‡§∏ ‡§Æ‡§Ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§≤‡•â‡§®‡•ç‡§ö ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ?"
      },
      options: [
        { en: "Ministry of Science and Technology", hi: "‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§® ‡§î‡§∞ ‡§™‡•ç‡§∞‡•å‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï‡•Ä ‡§Æ‡§Ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø" },
        { en: "Ministry of Electronics and IT", hi: "‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡•â‡§®‡§ø‡§ï‡•ç‡§∏ ‡§î‡§∞ ‡§∏‡•Ç‡§ö‡§®‡§æ ‡§™‡•ç‡§∞‡•å‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï‡•Ä ‡§Æ‡§Ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø" },
        { en: "Ministry of Finance", hi: "‡§µ‡§ø‡§§‡•ç‡§§ ‡§Æ‡§Ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø" },
        { en: "Ministry of Commerce", hi: "‡§µ‡§æ‡§£‡§ø‡§ú‡•ç‡§Ø ‡§Æ‡§Ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø" }
      ],
      correctAnswer: "Ministry of Science and Technology",
      explanation: {
        en: "It was launched by the Ministry of Science and Technology, developed at IIT Bombay under the NM-ICPS mission.",
        hi: "‡§á‡§∏‡•á ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§® ‡§î‡§∞ ‡§™‡•ç‡§∞‡•å‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï‡•Ä ‡§Æ‡§Ç‡§§‡•ç‡§∞‡§æ‡§≤‡§Ø ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ IIT ‡§¨‡•â‡§Æ‡•ç‡§¨‡•á ‡§Æ‡•á‡§Ç NM-ICPS ‡§Æ‡§ø‡§∂‡§® ‡§ï‡•á ‡§§‡§π‡§§ ‡§µ‡§ø‡§ï‡§∏‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§"
      }
    },
    {
      question: {
        en: "Which country hosted the 81st Annual General Meeting (AGM) of the International Air Transport Association (IATA)?",
        hi: "‡§Ö‡§Ç‡§§‡§∞‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§π‡§µ‡§æ‡§à ‡§™‡§∞‡§ø‡§µ‡§π‡§® ‡§∏‡§Ç‡§ò (IATA) ‡§ï‡•Ä 81‡§µ‡•Ä‡§Ç ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§Ü‡§Æ ‡§¨‡•à‡§†‡§ï (AGM) ‡§ï‡•Ä ‡§Æ‡•á‡§ú‡§º‡§¨‡§æ‡§®‡•Ä ‡§ï‡§ø‡§∏ ‡§¶‡•á‡§∂ ‡§®‡•á ‡§ï‡•Ä?"
      },
      options: [
        { en: "Indonesia", hi: "‡§á‡§Ç‡§°‡•ã‡§®‡•á‡§∂‡§ø‡§Ø‡§æ" },
        { en: "Japan", hi: "‡§ú‡§æ‡§™‡§æ‡§®" },
        { en: "China", hi: "‡§ö‡•Ä‡§®" },
        { en: "India", hi: "‡§≠‡§æ‡§∞‡§§" }
      ],
      correctAnswer: "India",
      explanation: {
        en: "The 81st IATA AGM was held in New Delhi at Bharat Mandapam after 42 years. Last time was in 1983.",
        hi: "81‡§µ‡•Ä‡§Ç IATA AGM ‡§®‡§à ‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§ï‡•á ‡§≠‡§æ‡§∞‡§§ ‡§Æ‡§Ç‡§°‡§™‡§Æ ‡§Æ‡•á‡§Ç 42 ‡§∏‡§æ‡§≤ ‡§¨‡§æ‡§¶ ‡§Ü‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§π‡•Å‡§à‡•§ ‡§™‡§ø‡§õ‡§≤‡•Ä ‡§¨‡§æ‡§∞ ‡§Ø‡§π 1983 ‡§Æ‡•á‡§Ç ‡§≠‡§æ‡§∞‡§§ ‡§Æ‡•á‡§Ç ‡§π‡•Å‡§à ‡§•‡•Ä‡•§"
      }
    },
    {
      question: {
        en: "Raigad Fort, recently in news, is located in which state?",
        hi: "‡§π‡§æ‡§≤ ‡§π‡•Ä ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§æ‡§ö‡§æ‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∞‡§π‡§æ ‡§∞‡§æ‡§Ø‡§ó‡§¢‡§º ‡§ï‡§ø‡§≤‡§æ ‡§ï‡§ø‡§∏ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§•‡§ø‡§§ ‡§π‡•à?"
      },
      options: [
        { en: "Telangana", hi: "‡§§‡•á‡§≤‡§Ç‡§ó‡§æ‡§®‡§æ" },
        { en: "Maharashtra", hi: "‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞" },
        { en: "Karnataka", hi: "‡§ï‡§∞‡•ç‡§®‡§æ‡§ü‡§ï" },
        { en: "Andhra Pradesh", hi: "‡§Ü‡§Ç‡§ß‡•ç‡§∞ ‡§™‡•ç‡§∞‡§¶‡•á‡§∂" }
      ],
      correctAnswer: "Maharashtra",
      explanation: {
        en: "Raigad Fort in Maharashtra was the capital of Chhatrapati Shivaji Maharaj and recently saw the discovery of an ancient astrolabe.",
        hi: "‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ ‡§∏‡•ç‡§•‡§ø‡§§ ‡§∞‡§æ‡§Ø‡§ó‡§¢‡§º ‡§ï‡§ø‡§≤‡§æ ‡§õ‡§§‡•ç‡§∞‡§™‡§§‡§ø ‡§∂‡§ø‡§µ‡§æ‡§ú‡•Ä ‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú ‡§ï‡•Ä ‡§∞‡§æ‡§ú‡§ß‡§æ‡§®‡•Ä ‡§•‡§æ‡•§ ‡§Ø‡§π‡§æ‡§Ç ‡§π‡§æ‡§≤ ‡§π‡•Ä ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§™‡•ç‡§∞‡§æ‡§ö‡•Ä‡§® ‡§Ø‡§Ç‡§§‡•ç‡§∞‡§∞‡§æ‡§ú ‡§Æ‡§ø‡§≤‡§æ ‡§π‡•à‡•§"
      }
    },
    {
      question: {
        en: "The Kheer Bhawani festival is celebrated in which state/UT?",
        hi: "‡§ñ‡•Ä‡§∞ ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§§‡•ç‡§Ø‡•ã‡§π‡§æ‡§∞ ‡§ï‡§ø‡§∏ ‡§∞‡§æ‡§ú‡•ç‡§Ø/‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§∂‡§æ‡§∏‡§ø‡§§ ‡§™‡•ç‡§∞‡§¶‡•á‡§∂ ‡§Æ‡•á‡§Ç ‡§Æ‡§®‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?"
      },
      options: [
        { en: "Jammu and Kashmir", hi: "‡§ú‡§Æ‡•ç‡§Æ‡•Ç ‡§î‡§∞ ‡§ï‡§∂‡•ç‡§Æ‡•Ä‡§∞" },
        { en: "Uttarakhand", hi: "‡§â‡§§‡•ç‡§§‡§∞‡§æ‡§ñ‡§Ç‡§°" },
        { en: "Andaman and Nicobar", hi: "‡§Ö‡§Ç‡§°‡§Æ‡§æ‡§® ‡§î‡§∞ ‡§®‡§ø‡§ï‡•ã‡§¨‡§æ‡§∞" },
        { en: "Himachal Pradesh", hi: "‡§π‡§ø‡§Æ‡§æ‡§ö‡§≤ ‡§™‡•ç‡§∞‡§¶‡•á‡§∂" }
      ],
      correctAnswer: "Jammu and Kashmir",
      explanation: {
        en: "The festival is celebrated at the Kheer Bhawani Temple in Ganderbal, J&K, on Jyeshtha Ashtami to honor Goddess Ragnya Devi.",
        hi: "‡§Ø‡§π ‡§§‡•ç‡§Ø‡•ã‡§π‡§æ‡§∞ ‡§ú‡§Æ‡•ç‡§Æ‡•Ç-‡§ï‡§∂‡•ç‡§Æ‡•Ä‡§∞ ‡§ï‡•á ‡§ó‡§æ‡§Ç‡§¶‡§∞‡§¨‡§≤ ‡§Æ‡•á‡§Ç ‡§ñ‡•Ä‡§∞ ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§Æ‡§Ç‡§¶‡§ø‡§∞ ‡§Æ‡•á‡§Ç ‡§ú‡•ç‡§Ø‡•á‡§∑‡•ç‡§† ‡§Ö‡§∑‡•ç‡§ü‡§Æ‡•Ä ‡§ï‡•ã ‡§¶‡•á‡§µ‡•Ä ‡§∞‡§ó‡§®‡•ç‡§Ø‡§æ ‡§ï‡•á ‡§∏‡§Æ‡•ç‡§Æ‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§Æ‡§®‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§"
      }
    }
  ]
  };
  // --- End of Quiz Data ---

  let currentQuestionIndex = 0;
  const userAnswers = {};

  // DOM references
  const questionSection = document.getElementById('question-section');
  const questionButtonsContainer = document.getElementById('question-buttons');
  const timerDisplay = document.getElementById('timer');
  const quizTitle = document.getElementById('quiz-title');
  const sectionTitle = document.getElementById('section-title');
  const languageSwitch = document.getElementById('language-switch');

  // Timer variables
  let timeLeft = quizData.timeLimitSeconds;
  let timerInterval;

  // Initialize quiz UI
  function initQuiz() {
    // Set initial language texts
    setLanguageTexts();

    // Create question navigation buttons
    createQuestionButtons();

    // Show first question
    showQuestion(0);

    // Start timer
    startTimer();

    // Show fullscreen prompt
    askFullscreen();
  }

  // Set quiz title and section title according to language
  function setLanguageTexts() {
    const lang = languageSwitch.value;
    quizTitle.textContent = quizData.title[lang];
    sectionTitle.textContent = quizData.sectionTitle[lang];
  }

  // Create question navigation buttons dynamically
  function createQuestionButtons() {
    questionButtonsContainer.innerHTML = '';
    quizData.questions.forEach((_, idx) => {
      const btn = document.createElement('button');
      btn.innerText = idx + 1;
      btn.id = `btn${idx}`;
      btn.onclick = () => showQuestion(idx);
      questionButtonsContainer.appendChild(btn);
    });
  }

  // Render the current question and options
  function showQuestion(index) {
    currentQuestionIndex = index;
    const lang = languageSwitch.value;
    const q = quizData.questions[index];

    // Highlight active question button
    document.querySelectorAll('#question-buttons button').forEach((b, i) => {
      b.classList.toggle('active', i === index);
      const status = getQuestionStatus(i);
      b.classList.remove('answered', 'review', 'unanswered');
      if (status) b.classList.add(status);
    });

    // Build question HTML
    let html = `
      <div class="question-box active" id="q${index}">
        <div class="question-number">Question No. ${index + 1}</div>
        <p class="question-text">${q.question[lang]}</p>
        <div class="options">
    `;

    q.options.forEach((opt, i) => {
      // Check if user already answered this question
      const checked = userAnswers[index] === opt.en ? 'checked' : '';
      html += `
        <label data-en="${opt.en}" data-hi="${opt.hi}">
          <input type="radio" name="q${index}" value="${opt.en}" ${checked}>
          ${opt[lang]}
        </label>
      `;
    });

    html += '</div></div>';

    questionSection.innerHTML = html;
  }

  // Get question button status: answered, review, or unanswered
  function getQuestionStatus(index) {
    if (userAnswers[index]?.status === 'review') return 'review';
    if (userAnswers[index]?.answer) return 'answered';
    return '';
  }

  // Save current answer & status
  function saveAnswer(status = 'answered') {
    const options = document.getElementsByName(`q${currentQuestionIndex}`);
    let selectedValue = null;
    for (const opt of options) {
      if (opt.checked) {
        selectedValue = opt.value;
        break;
      }
    }
    userAnswers[currentQuestionIndex] = {
      answer: selectedValue,
      status: status
    };

    // Update button colors
    const btn = document.getElementById(`btn${currentQuestionIndex}`);
    btn.classList.remove('answered', 'unanswered', 'review');
    if (status === 'review') btn.classList.add('review');
    else if (selectedValue) btn.classList.add('answered');
    else btn.classList.add('unanswered');
  }

  // Button handlers
  function previousQuestion() {
    if (currentQuestionIndex > 0) {
      showQuestion(currentQuestionIndex - 1);
    }
  }

  function saveAndNext() {
    saveAnswer('answered');
    if (currentQuestionIndex < quizData.questions.length - 1) {
      showQuestion(currentQuestionIndex + 1);
    }
  }

  function markForReview() {
    saveAnswer('review');
    if (currentQuestionIndex < quizData.questions.length - 1) {
      showQuestion(currentQuestionIndex + 1);
    }
  }

  function clearResponse() {
    const options = document.getElementsByName(`q${currentQuestionIndex}`);
    for (const opt of options) {
      opt.checked = false;
    }
    userAnswers[currentQuestionIndex] = {
      answer: null,
      status: ''
    };
    const btn = document.getElementById(`btn${currentQuestionIndex}`);
    btn.classList.remove('answered', 'unanswered', 'review');
  }

  // Submit test and show results
  function submitTest() {
    clearInterval(timerInterval);
  saveAnswer('answered'); // Save last answer

  const lang = languageSwitch.value;
  let score = 0;
  let attempted = 0;

  let resultHTML = `
    <h2 style="text-align:center; font-size: 28px;">üéâ ${lang === 'hi' ? '‡§ü‡•á‡§∏‡•ç‡§ü ‡§∏‡§æ‡§∞‡§æ‡§Ç‡§∂' : 'Test Summary'} üéâ</h2>
    <div class="final-score-box">
      <p><strong>${lang === 'hi' ? '‡§ï‡•Å‡§≤ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®:' : 'Total Questions:'}</strong> ${quizData.questions.length}</p>
  `;

  // Iterate through all questions
  quizData.questions.forEach((q, i) => {
    const userAnswerObj = userAnswers[i] || {};
    const userAnswer = userAnswerObj.answer || (lang === 'hi' ? '‡§â‡§§‡•ç‡§§‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§¶‡§ø‡§Ø‡§æ' : 'Not Answered');
    const correctAnswer = q.correctAnswer;
    const explanation = q.explanation[lang];
    const questionText = q.question[lang];

    // Score calculation
    if (userAnswerObj.answer) {
      attempted++;
      if (userAnswerObj.answer === correctAnswer) {
        score += 1;
      } else {
        score -= 0.25;
      }
    }

    resultHTML += `
      <div class="result-question">
        <p><strong>Q${i + 1}:</strong> ${questionText}</p>
        <p><strong>${lang === 'hi' ? '‡§Ü‡§™‡§ï‡§æ ‡§â‡§§‡•ç‡§§‡§∞:' : 'Your Answer:'}</strong> ${userAnswer}</p>
        <p><strong>${lang === 'hi' ? '‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞:' : 'Correct Answer:'}</strong> ${correctAnswer}</p>
        <p><strong>${lang === 'hi' ? '‡§∏‡•ç‡§™‡§∑‡•ç‡§ü‡•Ä‡§ï‡§∞‡§£:' : 'Explanation:'}</strong> ${explanation}</p>
      </div>
    `;
  });

  resultHTML += `
      <p><strong>${lang === 'hi' ? '‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡§ø‡§è ‡§ó‡§è:' : 'Attempted:'}</strong> ${attempted}</p>
<p><strong>${lang === 'hi' ? '‡§ï‡•Å‡§≤ ‡§Ö‡§Ç‡§ï:' : 'Total Marks:'}</strong> ${quizData.questions.length}</p>
<p><strong>${lang === 'hi' ? '‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§∏‡•ç‡§ï‡•ã‡§∞:' : 'Final Score:'}</strong> ${score.toFixed(2)} / ${quizData.questions.length}</p>

    </div>

    <div class="result-buttons" style="text-align:center; margin-top:20px;">
      <button onclick="location.reload()">üîÅ ${lang === 'hi' ? '‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç' : 'Retake Test'}</button>
    </div>
  `;

  questionSection.innerHTML = `<div id="result">${resultHTML}</div>`;
  document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
  }

  // Timer functions
  function startTimer() {
    updateTimer();
    timerInterval = setInterval(() => {
      timeLeft--;
      updateTimer();
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        submitTest();
      }
    }, 1000);
  }

  function updateTimer() {
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    timerDisplay.textContent = `Time Left: ${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
  }

  // Toggle sidebar on small screens
  function toggleSidebar() {
    document.querySelector('.sidebar').classList.toggle('open');
  }

  // Fullscreen toggle
  document.getElementById("fullscreen-toggle").addEventListener("click", () => {
    if (!document.fullscreenElement) {
      document.documentElement.requestFullscreen().catch(err => console.error(err));
    } else {
      document.exitFullscreen().catch(err => console.error(err));
    }
  });

  // Ask fullscreen at start
  function askFullscreen() {
    Swal.fire({
      title: 'Start Quiz in Fullscreen?',
      icon: 'question',
      showCancelButton: true,
      confirmButtonText: 'Yes, Start',
      cancelButtonText: 'No, Thanks',
    }).then((result) => {
      if (result.isConfirmed) {
        document.documentElement.requestFullscreen().catch(() => {});
      }
    });
  }

  // Language switch handler
  function switchLanguage() {
    setLanguageTexts();
    showQuestion(currentQuestionIndex);
  }

  // Expose some functions globally for button onclicks
  window.previousQuestion = previousQuestion;
  window.saveAndNext = saveAndNext;
  window.markForReview = markForReview;
  window.clearResponse = clearResponse;
  window.submitTest = submitTest;
  window.toggleSidebar = toggleSidebar;
  window.switchLanguage = switchLanguage;

  // Initialize on page load
  window.onload = initQuiz;
</script>
</body>
</html>
